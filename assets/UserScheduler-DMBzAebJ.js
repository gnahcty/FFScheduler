import{S as x,$ as H,B as q,o as l,c as r,x as U,E as J,G as B,y as Q,a0 as X,a1 as Z,i as h,g as i,a2 as j,R as M,a as n,t as p,F as w,h as C,n as T,K as I,j as E,e as $,b as y,a3 as ee,a4 as te}from"./index-Ze7FPScB.js";import{m as ne,v as Y,_ as se}from"./FieldSet-Ck-AoKGQ.js";import{c as F,g as oe,f as S,s as ae}from"./format-CdzXqEwX.js";import{u as L}from"./useAxios-BTLhMLb6.js";import{e as P}from"./eachDayOfInterval-DUqgGfxw.js";import"./index-Cyfws2x3.js";function le(s,t){const e=x(s);return isNaN(t)?F(s,NaN):(t&&e.setDate(e.getDate()+t),e)}function re(s,t){const e=x(s);if(isNaN(t))return F(s,NaN);if(!t)return e;const o=e.getDate(),a=F(s,e.getTime());a.setMonth(e.getMonth()+t+1,0);const d=a.getDate();return o>=d?a:(e.setFullYear(a.getFullYear(),a.getMonth(),o),e)}function z(s,t){const e=t*7;return le(s,e)}function ie(s){return F(s,Date.now())}function de(s){const t=x(s),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function ce(s){const t=x(s);return t.setDate(1),t.setHours(0,0,0,0),t}function ue(s,t){var m,_,v,f;const e=oe(),o=(t==null?void 0:t.weekStartsOn)??((_=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:_.weekStartsOn)??e.weekStartsOn??((f=(v=e.locale)==null?void 0:v.options)==null?void 0:f.weekStartsOn)??0,a=x(s),d=a.getDay(),c=(d<o?-7:0)+6-(d-o);return a.setDate(a.getDate()+c),a.setHours(23,59,59,999),a}function pe(s){return x(s).getDate()}function ve(s){return x(s).getDay()}function fe(s){return x(s).getFullYear()}function N(s){return H(s,ie(s))}function A(s,t){const e=+x(s),[o,a]=[+x(t.start),+x(t.end)].sort((d,c)=>d-c);return e>=o&&e<=a}var _e={root:function(t){var e=t.props;return{justifyContent:e.layout==="horizontal"?e.align==="center"||e.align===null?"center":e.align==="left"?"flex-start":e.align==="right"?"flex-end":null:null,alignItems:e.layout==="vertical"?e.align==="center"||e.align===null?"center":e.align==="top"?"flex-start":e.align==="bottom"?"flex-end":null:null}}},ge={root:function(t){var e=t.props;return["p-divider p-component","p-divider-"+e.layout,"p-divider-"+e.type,{"p-divider-left":e.layout==="horizontal"&&(!e.align||e.align==="left")},{"p-divider-center":e.layout==="horizontal"&&e.align==="center"},{"p-divider-right":e.layout==="horizontal"&&e.align==="right"},{"p-divider-top":e.layout==="vertical"&&e.align==="top"},{"p-divider-center":e.layout==="vertical"&&(!e.align||e.align==="center")},{"p-divider-bottom":e.layout==="vertical"&&e.align==="bottom"}]},content:"p-divider-content"},me=q.extend({name:"divider",classes:ge,inlineStyles:_e}),he={name:"BaseDivider",extends:Q,props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},style:me,provide:function(){return{$parentInstance:this}}},V={name:"Divider",extends:he,inheritAttrs:!1},xe=["aria-orientation"];function ye(s,t,e,o,a,d){return l(),r("div",U({class:s.cx("root"),style:s.sx("root"),role:"separator","aria-orientation":s.layout},s.ptmi("root")),[s.$slots.default?(l(),r("div",U({key:0,class:s.cx("content")},s.ptm("content")),[J(s.$slots,"default")],16)):B("",!0)],16,xe)}V.render=ye;const we={class:"truncate text-xs leading-tight"},De={class:"truncate text-sm leading-tight"},$e={class:"truncate text-xs leading-tight"},be={key:1,class:"flex gap-3 lg:hidden"},ke={class:"flex flex-col items-center text-sm"},Se=n("span",null,"|",-1),Me={class:"truncate"},Ce={class:"truncate"},G={__name:"EventChips",props:X({showHidden:{type:Boolean,default:!1}},{list:{},listModifiers:{}}),emits:["update:list"],setup(s){var _;const t=s,e=Z(s,"list"),o=ne((_=e.value)==null?void 0:_._id),a=e.value.screening.film,d=S(e.value.screening.time,"HH:mm"),c=S(e.value.screening.endTime,"HH:mm"),m=h(()=>t.showHidden?o.isHidden.value:!o.isHidden.value);return(v,f)=>(l(),r(w,null,[i(o).isHidden.value?B("",!0):j((l(),r("div",{key:0,class:M(["mt-1 hidden cursor-pointer overflow-hidden rounded-lg px-2 py-1 lg:block",i(o).chipStyle.value]),onClick:f[0]||(f[0]=D=>i(o).hide())},[n("p",we,p(i(d))+" - "+p(i(c)),1),n("p",De,p(i(a).CName),1),n("p",$e,p(i(a).EName),1)],2)),[[i(Y),[()=>i(o).lock(),{modifiers:{stop:!0}}]]]),m.value?(l(),r("div",be,[n("div",ke,[n("span",null,p(i(d)),1),Se,n("span",null,p(i(c)),1)]),j((l(),r("div",{class:M(["mt-1 flex-auto cursor-pointer select-none overflow-hidden rounded-lg border px-2 py-1",i(o).chipStyle.value]),onClick:f[1]||(f[1]=D=>i(o).hide())},[n("p",Me,p(i(a).CName),1),n("p",Ce,p(i(a).EName),1)],2)),[[i(Y),[()=>i(o).lock(),{modifiers:{stop:!0}}]]])])):B("",!0)],64))}},Fe={class:"mx-auto mt-5 flex justify-center overflow-auto py-4 sm:justify-center sm:px-2 md:mx-12"},Oe=["onClick"],Ne={class:"flex flex-col items-center px-4 py-4 text-center"},Be={class:"text-sm"},je={class:"mt-3"},He=["onClick"],Te={class:"text-sm"},Ee={class:"flex w-full items-center justify-center gap-5 font-bold text-white"},Le={class:"text-lg"},We={class:"flex flex-col"},Re={class:"flex flex-wrap px-5 sm:mt-10"},Ue={class:"flex flex-auto flex-col gap-1 rounded p-3"},Ye={class:"w-full sm:w-64"},ze=n("div",{class:"text-center font-bold underline underline-offset-2 opacity-50"}," 本日已刪除場次 ",-1),Ie={class:"mt-3 min-h-32 rounded-lg border border-dashed px-2 py-3"},Pe={__name:"CalendarForMobile",setup(s){const t=C(null),e=C([]),o=C(new Date),{getFFDateRange:a}=L(),d=T(),c=b=>h(()=>A(b,{start:new Date(t.value.start),end:new Date(t.value.end)})||H(b,new Date(t.value.start))),m=h(()=>ae(o.value,{weekStartsOn:1})),_=h(()=>ue(o.value,{weekStartsOn:1})),v=h(()=>S(o.value,"MMMM yyyy")),f=h(()=>P({start:m.value,end:_.value}).map(b=>({day:S(b,"EEE"),date:S(b,"dd"),dateString:S(b,"yyyy-MM-dd")}))),D=()=>{o.value=z(o.value,1)},g=()=>{o.value=z(o.value,-1)};return I(()=>o.value,()=>{e.value=d.getListByDate(o.value)}),E(async()=>{t.value=await a(),o.value=new Date(t.value.start),e.value=d.getListByDate(o.value)}),(b,ht)=>{const W=ee,R=G,K=V;return l(),r(w,null,[n("div",Fe,[(l(!0),r(w,null,$(f.value,u=>(l(),r("div",{key:u.dateString},[n("div",{class:M(["hidden justify-center sm:mx-1 sm:flex sm:w-16 sm:cursor-pointer sm:rounded-lg",{" border border-primary-700 font-bold ":o.value.getDate()===new Date(u.dateString).getDate(),"text-primary-500":c(u.dateString),"text-primary-50":!c(u.dateString)}]),onClick:k=>o.value=new Date(u.dateString)},[n("div",Ne,[n("p",Be,p(u.day),1),n("p",je,p(u.date),1)])],10,Oe),n("div",{class:M(["mx-1 flex flex-col justify-center gap-3 text-center sm:hidden",{"text-primary-500":c(u.dateString),"text-primary-50":!c(u.dateString)}]),onClick:k=>o.value=new Date(u.dateString)},[n("p",Te,p(u.day),1),n("p",{class:M(["flex h-10 w-10 cursor-pointer items-center justify-center rounded-full",{"border border-primary-600 font-bold ":o.value.getDate()===new Date(u.dateString).getDate()}])},p(u.date),3)],10,He)]))),128))]),n("div",Ee,[y(W,{onClick:g,class:"px-4 py-2",icon:"pi pi-angle-left",text:"",rounded:""}),n("div",Le,p(v.value),1),y(W,{onClick:D,class:"px-4 py-2",icon:"pi pi-angle-right",text:"",rounded:""})]),n("div",We,[n("div",Re,[n("div",Ue,[(l(!0),r(w,null,$(e.value,(u,k)=>(l(),r("div",{key:u._id},[y(R,{list:e.value[k],"onUpdate:list":O=>e.value[k]=O},null,8,["list","onUpdate:list"])]))),128))]),y(K,{class:"sm:hidden"}),n("div",Ye,[ze,n("div",Ie,[(l(!0),r(w,null,$(e.value,(u,k)=>(l(),r("div",{key:u._id},[y(R,{list:e.value[k],"onUpdate:list":O=>e.value[k]=O,showHidden:""},null,8,["list","onUpdate:list"])]))),128))])])])])],64)}}},Ae={class:"relative h-full min-h-32 border-b border-r border-stone-700 px-2 py-2"},Ve={__name:"DateBlock",props:{date:{type:Object,default:null}},setup(s){const{getFFDateRange:t}=L(),{getListByDate:e}=T(),o=s,a=C(null),d=C([]),c=h(()=>a.value?A(o.date,{start:new Date(a.value.start),end:new Date(a.value.end)})||H(o.date,new Date(a.value.start)):!1);return I(()=>o.date,()=>{d.value=e(o.date)}),E(async()=>{a.value=await t(),d.value=e(o.date)}),(m,_)=>{const v=G;return l(),r("div",Ae,[n("div",{class:M(["inline-flex h-6 w-6 cursor-pointer items-center justify-center rounded-full text-center leading-none transition duration-100 ease-in-out",{"text-primary-500 underline underline-offset-4":i(N)(o.date),"text-stone-200":c.value&&!i(N)(o.date),"text-stone-600":!i(N)(o.date)&&!c.value}])},p(i(pe)(o.date)),3),(l(!0),r(w,null,$(d.value,(f,D)=>(l(),r("div",{key:f._id},[y(v,{list:d.value[D],"onUpdate:list":g=>d.value[D]=g},null,8,["list","onUpdate:list"])]))),128))])}}},Ge={class:"relative mt-10 overflow-hidden rounded-lg border border-stone-600"},Ke={class:"flex items-center justify-between px-6 py-2"},qe={class:"text-lg font-bold"},Je={class:"ml-1 text-lg font-bold"},Qe={class:"flex items-center rounded-lg px-1",style:{"padding-top":"2px"}},Xe=n("span",{class:"pi pi-angle-left"},null,-1),Ze=[Xe],et=n("span",{class:"pi pi-angle-right"},null,-1),tt=[et],nt={class:"-mx-1 -mb-1 grid grid-cols-7 border-t border-stone-600"},st={class:"absolute grid w-full grid-cols-7"},ot={class:"pl-2 text-center text-sm font-bold uppercase tracking-wide text-primary-800"},at=n("div",{class:"h-full min-h-32 border-b border-r border-stone-600"},null,-1),lt=[at],rt={__name:"CalendarForPC",setup(s){const{getFFDateRange:t}=L(),e=C(new Date),o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],a=h(()=>ce(e.value)),d=h(()=>de(e.value)),c=h(()=>P({start:a.value,end:d.value})),m=h(()=>(ve(a.value)+6)%7);function _(v){e.value=re(e.value,v)}return E(async()=>{const v=await t();e.value=new Date(v.start)}),(v,f)=>{const D=Ve;return l(),r("div",Ge,[n("div",Ke,[n("div",null,[n("span",qe,p(i(S)(e.value,"MMMM")),1),n("span",Je,p(i(fe)(e.value)),1)]),n("div",Qe,[n("button",{class:"inline-flex cursor-pointer items-center rounded-lg p-1 leading-none transition duration-100 ease-in-out hover:bg-gray-200",onClick:f[0]||(f[0]=g=>_(-1))},Ze),n("button",{class:"inline-flex cursor-pointer items-center rounded-lg p-1 leading-none transition duration-100 ease-in-out hover:bg-gray-200",onClick:f[1]||(f[1]=g=>_(1))},tt)])]),n("div",nt,[n("div",st,[(l(),r(w,null,$(o,g=>n("div",{key:g,class:"h-8 pt-[10px]"},[n("div",ot,p(g),1)])),64))]),(l(!0),r(w,null,$(m.value,g=>(l(),r("div",{key:g},lt))),128)),(l(!0),r(w,null,$(c.value,g=>(l(),r("div",{key:g.getDate()},[y(D,{date:g},null,8,["date"])]))),128))])])}}},it={class:"min-h-screen w-full bg-stone-900 py-12 text-primary-600 lg:h-screen"},dt={class:"no-scrollbar mx-auto hidden h-full w-screen lg:flex"},ct={class:"no-scrollbar h-full w-full overflow-auto px-10"},ut={class:"flex w-full flex-1 items-center justify-between px-2 lg:pt-8"},pt=n("div",{class:"text-7xl uppercase"},"scheduler",-1),vt={class:"flex gap-5 text-xl"},ft={class:"pi pi-info-circle cursor-pointer hover:text-stone-300"},_t={class:"no-scrollbar flex-auto overflow-auto"},gt={class:"lg:hidden"},mt=`點擊場次以刪除
 長按場次以鎖定`,kt={__name:"UserScheduler",setup(s){const t=T(),e=C(!1);return(o,a)=>{const d=rt,c=se,m=Pe,_=te("tooltip");return l(),r("div",it,[n("div",dt,[n("div",ct,[n("div",ut,[pt,n("div",vt,[j(n("div",ft,null,512),[[_,mt,void 0,{left:!0}]]),n("div",{class:"pi pi-list cursor-pointer hover:text-stone-300",onClick:a[0]||(a[0]=v=>e.value=!e.value)})])]),y(d)]),n("div",{id:"list",class:M(["no-scrollbar flex h-full flex-col justify-between pr-5 transition-all duration-300",{"w-0":!e.value,"w-1/2":e.value}])},[n("div",_t,[(l(!0),r(w,null,$(i(t).listByFilm,v=>(l(),r("div",{key:v.CName},[y(c,{film:v},null,8,["film"])]))),128))])],2)]),n("div",gt,[y(m)])])}}};export{kt as default};
