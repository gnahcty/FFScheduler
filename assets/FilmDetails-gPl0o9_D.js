import{_ as N}from"./LikeButton-D03_IU-k.js";import{o as t,c as l,F as c,e as f,a as e,t as r,b as v,h as S,s as F,W as V,q,i as m,j as E,k as M,N as D,r as R,w as z,X as A}from"./index-IOWfBMct.js";import{u as G}from"./useAxios-DkOjNQ3S.js";import"./format-9e0X1DaC.js";const O={role:"list",class:"w-full flex-shrink divide-y divide-orange-600"},Q={class:"text-md flex flex-wrap gap-x-2"},W={class:"w-[5.3rem]"},X={__name:"ShowtimeList",props:{screenings:{type:Object,default:()=>{}}},setup(h){const u=h;return(x,w)=>{const _=N;return t(),l("ul",O,[(t(!0),l(c,null,f(u.screenings,o=>(t(),l("li",{key:o._id,class:"flex justify-between"},[e("div",Q,[e("span",W,r(o.date),1),e("span",null,r(o.time),1),e("span",null,r(o.place),1)]),v(_,{screeningId:o._id,class:""},null,8,["screeningId"])]))),128))])}}},H={class:"flex min-h-full flex-col bg-stone-900 pb-12 text-primary-600 sm:h-full sm:pb-0 sm:pt-12"},J={class:"text-9xl font-bold"},K={class:"flex-0 text-nowrap"},P={class:"flex-0 text-nowrap"},T={class:"flex h-full flex-col justify-between gap-y-6 overflow-clip sm:flex-row"},U={class:"hidden max-w-fit flex-1 md:block"},Y=["src"],Z={class:"mr-2 flex w-full min-w-72 flex-col justify-between sm:w-1/4"},ee={class:"flex flex-col"},se={class:"mb-2"},te={class:"mb-2 flex items-center gap-2"},le=["href"],oe={key:0,class:"flex h-6 w-6 items-center justify-center rounded-full border-2 border-primary-500 text-center font-semibold hover:border-stone-200"},ae={class:"mb-2 flex flex-wrap items-center divide-x divide-primary-600 text-center"},ne={class:"flex flex-col"},re={class:"flex w-full min-w-72 items-end sm:w-[28vw]"},ie={class:"no-scrollbar max-h-full overflow-auto"},fe={__name:"FilmDetails",setup(h){const u=S(),{getFilmById:x,getScreeningsByFilmId:w}=G(),{nextIdInCategory:_}=F(),o=V(),b=q(),s=m({}),p=m([]),g=m(""),y=m([]),k=a=>{const i=_(o.params.id,a);i?b.push(`/details/${i}`):b.push("/categories")},L=E(()=>{var a;return(a=s.value.EName)==null?void 0:a.replace(" ","+")}),C=a=>[{url:`https://search.douban.com/movie/subject_search?search_text=${a}&cat=1002`,icon:"豆"},{url:`https://letterboxd.com/search/${a}`,icon:"icon-[fa6-brands--square-letterboxd]"},{url:`https://www.imdb.com/find?q=${a}&s=tt`,icon:"icon-[fa6-brands--imdb]"},{url:`https://www.youtube.com/results?search_query=${a}+trailer`,icon:"icon-[fa6-brands--youtube]"}],$=async()=>{s.value=await x(o.params.id),g.value=s.value.photos[0],p.value=[s.value.release_year,s.value.region,s.value.format,s.value.color,s.value.length,s.value.rating],y.value=await w(o.params.id)};return M(()=>{$(),u.isLoading=!1}),D(()=>o.params.id,u.isLoading=!1,()=>$()),(a,i)=>{var j;const I=R("Vue3Marquee"),B=X;return t(),l(c,null,[e("div",{class:"absolute h-full w-0 cursor-left sm:w-12 md:w-24 lg:w-1/5",onClick:i[0]||(i[0]=n=>k(-1))}),e("div",{class:"absolute right-0 h-full w-0 cursor-right sm:w-12 md:w-24 lg:w-1/5",onClick:i[1]||(i[1]=n=>k(1))}),e("div",H,[e("div",J,[v(I,{class:"overflow-y-clip",clone:!0},{default:z(()=>[e("span",K,r(s.value.EName),1),e("span",P,r(s.value.CName),1)]),_:1})]),e("div",T,[e("div",U,[e("img",{src:g.value,alt:"film poster",class:"h-full w-[40vw] object-cover"},null,8,Y)]),e("div",Z,[e("div",ee,[e("div",se,"導演: "+r((j=s.value.directors)==null?void 0:j.join()),1),e("div",te,[(t(!0),l(c,null,f(C(L.value),(n,d)=>(t(),l("a",{key:d,href:n.url,target:"_blank",class:"hover:text-stone-200"},[n.icon==="豆"?(t(),l("span",oe,"豆")):(t(),l("span",{key:1,class:A([n.icon,"flex h-6 w-6 items-center justify-center"])},null,2))],8,le))),128))]),(t(!0),l(c,null,f(s.value.awards,n=>(t(),l("div",{key:n},r(n),1))),128)),e("div",ae,[(t(!0),l(c,null,f(p.value,(n,d)=>(t(),l("div",{key:d,class:"flex-shrink-0 px-1 first:pl-0"},r(p.value[d]),1))),128))])]),e("div",ne,[v(B,{screenings:y.value},null,8,["screenings"])])]),e("div",re,[e("div",ie,r(s.value.description),1)])])])],64)}}};export{fe as default};
