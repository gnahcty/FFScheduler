import{c as j,a as p,u as q,s as B,b as L}from"./index.esm-C9uHR_rA.js";import{m as U,u as $,n as C,p as F,k as M,r as N,o as R,c as T,a as s,b as i,w as _,g as a,q as D,s as x,t as b}from"./index-DH4tLRBM.js";const E={class:"flex h-full items-center bg-stone-900 text-primary-600"},I={class:"flex w-full flex-col justify-center self-center px-6 pb-12 sm:pb-0 lg:px-8"},P=s("div",{class:"pi pi-times"},null,-1),z=s("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[s("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight sm:mt-0"}," 登入帳號 ")],-1),A={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},G=["disabled"],H={class:"field"},J=s("label",{for:"account",class:"mb-2 text-sm font-medium leading-6"},"帳號",-1),K={class:"h-6 w-full text-right"},O={id:"account-help",class:"text-xs"},Q={class:"field mb-4"},W={class:"flex flex-col"},X=s("label",{for:"password",class:"text-sm font-medium leading-6"},"密碼",-1),Y={class:"h-6 w-full text-right"},Z={id:"password-help",class:"text-xs"},ss=s("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-primary-500 px-3 py-1.5 text-sm font-semibold leading-6 text-white hover:bg-primary-400"}," 登入 ",-1),ts=s("div",{class:"my-4 mt-10 flex items-center before:mt-0.5 before:flex-1 before:border-t before:border-primary-700 after:mt-0.5 after:flex-1 after:border-t after:border-primary-700"},[s("p",{class:"mx-4 mb-0 text-center text-sm font-semibold"},"還不是會員？")],-1),es={class:"mt-10 flex items-center justify-center gap-8 text-center"},os=s("div",{class:"font-semibold leading-6 text-primary-500 hover:text-primary-400"},"註冊",-1),is={__name:"LoginView",setup(as){const g=U(),h=$(),w=C(),v=F(),d=(r,t,e="",o=1e3)=>{v.add({severity:r,summary:t,detail:e,life:o})},y=j({account:p().required("必填").min(6,"帳號最少 6 個字").max(20,"帳號最多 20 個字"),password:p().required("必填").min(6,"密碼最少 6 個字").max(20,"密碼最多 20 個字")}),{defineField:m,handleSubmit:k,isSubmitting:V,errors:u}=q({validationSchema:y}),[l]=m("account"),[c]=m("password"),f=k(async r=>{var t,e;try{const{data:o}=await M.post("/user/login",{account:r.account,password:r.password});h.login({token:o.result.token}),w.getList(),d("success","登入成功"),g.push("/categories")}catch(o){d("error","登入失敗",((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"發生未知錯誤，請稍後再試",2e3)}});return(r,t)=>{const e=N("router-link"),o=B,S=L;return R(),T("div",E,[s("div",I,[i(e,{to:"/",class:"sm:hidden"},{default:_(()=>[P]),_:1}),z,s("div",A,[s("form",{disabled:a(V),onSubmit:t[2]||(t[2]=D((...n)=>a(f)&&a(f)(...n),["prevent"]))},[s("div",H,[J,i(o,{modelValue:a(l),"onUpdate:modelValue":t[0]||(t[0]=n=>x(l)?l.value=n:null),id:"account",class:"w-full rounded-md border-0 ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-amber-600 sm:text-sm sm:leading-6"},null,8,["modelValue"]),s("div",K,[s("small",O,b(a(u).account),1)])]),s("div",Q,[s("div",W,[X,i(S,{modelValue:a(c),"onUpdate:modelValue":t[1]||(t[1]=n=>x(c)?c.value=n:null),type:"password",toggleMask:"",feedback:!1,class:"w-full rounded-md border-0 ring-1 ring-inset sm:text-sm sm:leading-6"},null,8,["modelValue"])]),s("div",Y,[s("small",Z,b(a(u).password),1)])]),ss],40,G),ts,s("div",es,[i(e,{to:"/register"},{default:_(()=>[os]),_:1})])])])])}}};export{is as default};
