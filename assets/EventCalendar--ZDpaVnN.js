import{_ as V}from"./LikeButton-BxNTvYwC.js";import{S as P,i as g,r as G,o as d,c as m,a as s,b,w as D,t as w,W as B,Q as I,F as T,e as j,g as N,h as x,K as O,j as R,X as J,m as K,R as z,J as E}from"./index-DH4tLRBM.js";import{c as Q,m as U,f as M}from"./format-DIW4xuWu.js";import{p as A,u as H}from"./useAxios-Bxu45JBM.js";import{u as X}from"./sideScroller-BNAnTI-c.js";import{t as q,a as Y,b as Z,i as ee}from"./index-DTKYWdLm.js";import{m as te,c as se,S as ne}from"./animation-DZdQDmLB.js";import{e as oe}from"./eachDayOfInterval-CNVUumRm.js";function le(t,e){const a=+P(t);return Q(t,a+e)}function ae(t,e){return le(t,e*U)}const re={class:"group relative m-0 flex h-full rounded-md sm:mx-auto sm:max-w-lg"},ie=s("div",{class:"absolute inset-0 z-10 h-full w-full rounded-md bg-gradient-to-t from-black/80 via-black/50 to-black/10 backdrop-grayscale duration-300 group-hover:backdrop-grayscale-0"},null,-1),ce={class:"h-full w-full overflow-hidden rounded-md opacity-80 transition duration-300 ease-in-out group-hover:opacity-100"},ue=["src","alt"],de={class:"absolute z-10 flex h-full w-full items-center justify-between p-4 ps-4"},me={class:"ellipsis flex h-fit w-full flex-col overflow-clip duration-300 ease-in-out group-hover:-translate-y-1 group-hover:translate-x-3 group-hover:scale-110"},fe={class:"text-xs opacity-75 sm:text-sm"},pe={class:"sm:text-md text-sm"},ve={class:"text-pretty text-xs opacity-75 sm:text-sm"},he={__name:"ScreeningCard",props:{screening:{type:Object,default:()=>{}},film:{type:Object,default:()=>{}},vertical:{type:Boolean,default:!1},date:{type:String,default:""}},setup(t){const e=t,a=g(()=>M(A(e.screening.time),"HH:mm")),c=g(()=>{const o=A(e.screening.time),i=ae(o,v.value);return M(i,"HH:mm")}),v=g(()=>parseInt(e.film.length.split(" ")[0])),u=o=>{const[i,l]=o.split(":").map(Number);return i*60+l},r=()=>{const i=u(a.value),l=parseInt(e.film.length.split(" ")[0],10);return e.vertical?{marginTop:(i-610)*2+"px",height:l*2+"px"}:{marginLeft:(i-610)*2.6+"px",width:l*3+"px"}};return(o,i)=>{const l=G("router-link"),f=V;return d(),m("div",{class:"animateScreeningCard absolute h-full rounded-md",style:B(r())},[s("div",re,[ie,s("div",ce,[b(l,{to:`/details/${e.film._id}`},{default:D(()=>[s("img",{src:e.film.photos[0],class:"block h-full w-full scale-100 transform object-cover object-center opacity-100 transition duration-300 group-hover:scale-110",alt:e.film.CName},null,8,ue)]),_:1},8,["to"])]),s("div",de,[b(l,{to:`/details/${e.film._id}`},{default:D(()=>[s("div",me,[s("span",fe,w(a.value)+" - "+w(c.value),1),s("span",pe,w(e.film.CName),1),s("span",ve,w(e.film.EName),1)])]),_:1},8,["to"]),b(f,{screeningId:e.screening._id},null,8,["screeningId"])])])],4)}}},_e={class:"overflow-hidden"},xe={class:"animateRiver flex aspect-4/3 h-full items-center justify-center text-nowrap rounded-md bg-stone-500 p-2"},ge={class:"no-scrollbar flex h-full w-full justify-center gap-1 overflow-auto text-stone-300 sm:hidden"},we={class:"flex h-20 w-full items-center justify-center text-nowrap rounded-md bg-stone-500 p-2 text-sm"},ye={__name:"EventSchedule",props:{screenTimes:{type:Object,default:()=>{}}},setup(t){const{scrollContainer:e}=X(),a=t,c=I();return(v,u)=>{const r=he;return d(),m(T,null,[s("div",{class:"no-scrollbar hidden h-full w-full flex-col justify-center overflow-x-auto text-stone-300 sm:flex",ref_key:"scrollContainer",ref:e},[(d(!0),m(T,null,j(a.screenTimes,(o,i)=>(d(),m("div",{key:i,class:"flex-0 mt-7 flex h-1/3"},[s("div",_e,[s("div",xe,[s("span",null,w(i),1)])]),(d(!0),m(T,null,j(o,l=>(d(),m("div",{key:l._id,class:"relative"},[b(r,{screening:l,film:l.film,date:N(c).params.date},null,8,["screening","film","date"])]))),128))]))),128))],512),s("div",ge,[(d(!0),m(T,null,j(t.screenTimes,(o,i)=>(d(),m("div",{key:i,class:"flex-0 animateScreeningCard h-full w-full flex-col"},[s("div",we,[s("span",null,w(i),1)]),(d(!0),m(T,null,j(o,l=>(d(),m("div",{key:l._id,class:"no-scrollbar relative"},[b(r,{screening:l,film:l.film,date:N(c).params.date,vertical:!0},null,8,["screening","film","date"])]))),128))]))),128))])],64)}}};function C(t){var e;const a=Y(t);return(e=a==null?void 0:a.$el)!=null?e:a}const L=ee?window:void 0;function be(){const t=x(!1),e=J();return e&&R(()=>{t.value=!0},e),t}function $e(t){const e=be();return g(()=>(e.value,!!t()))}function Se(t,e,a={}){const{window:c=L,...v}=a;let u;const r=$e(()=>c&&"ResizeObserver"in c),o=()=>{u&&(u.disconnect(),u=void 0)},i=g(()=>Array.isArray(t)?t.map(n=>C(n)):[C(t)]),l=O(i,n=>{if(o(),r.value&&c){u=new ResizeObserver(e);for(const p of n)p&&u.observe(p,v)}},{immediate:!0,flush:"post"}),f=()=>{o(),l()};return Z(f),{isSupported:r,stop:f}}function Te(t,e={width:0,height:0},a={}){const{window:c=L,box:v="content-box"}=a,u=g(()=>{var n,p;return(p=(n=C(t))==null?void 0:n.namespaceURI)==null?void 0:p.includes("svg")}),r=x(e.width),o=x(e.height),{stop:i}=Se(t,([n])=>{const p=v==="border-box"?n.borderBoxSize:v==="content-box"?n.contentBoxSize:n.devicePixelContentBoxSize;if(c&&u.value){const y=C(t);if(y){const h=c.getComputedStyle(y);r.value=Number.parseFloat(h.width),o.value=Number.parseFloat(h.height)}}else if(p){const y=Array.isArray(p)?p:[p];r.value=y.reduce((h,{inlineSize:k})=>h+k,0),o.value=y.reduce((h,{blockSize:k})=>h+k,0)}else r.value=n.contentRect.width,o.value=n.contentRect.height},a);q(()=>{const n=C(t);n&&(r.value="offsetWidth"in n?n.offsetWidth:e.width,o.value="offsetHeight"in n?n.offsetHeight:e.height)});const l=O(()=>C(t),n=>{r.value=n?e.width:0,o.value=n?e.height:0});function f(){i(),l()}return{width:r,height:o,stop:f}}const Ce={class:"my-4 flex w-full justify-center sm:my-10"},ke={class:"relative overflow-hidden md:h-36"},je=s("div",{class:"animateMask absolute h-full bg-primary-500"},null,-1),Me={class:"animateTitle flex h-16 justify-center md:h-36"},Fe={class:"hidden items-center text-5xl sm:flex md:text-7xl lg:text-9xl"},Be={id:"timeLine",class:"flex w-full flex-col overflow-clip"},Ie=["id","onClick"],Oe=s("div",{class:"h-1/2 w-full border-t border-primary-600 sm:border-t-2 md:border-t-4 lg:border-t-8"},null,-1),Re=s("div",{class:"hidden items-center text-5xl sm:flex md:text-7xl lg:text-9xl"},"2024",-1),De={__name:"TimelineNav",setup(t){const{getFFDateRange:e}=H(),a=K(),c=I(),v=x(null),{width:u}=Te(v),r=g(()=>u.value>530?u.value/7:u.value/5),o=g(()=>u.value>530?3:2),i=x(null),l=x(null),f=x(null),n=x([]),p=(_,F)=>oe({start:_,end:F}).map($=>({date:M($,"dd"),day:M($,"eee")})),y=x(c.params.date.split("_")[1]),h=g(()=>n.value.findIndex(_=>_.date===y.value)),k=g(()=>`left:${-r.value*(h.value-o.value)}px`),W=(_,F)=>{te(r.value,F,h.value),a.push(`${f.value}_${_}`)};return R(async()=>{const _=await e();i.value=_.start,l.value=_.end,f.value=M(_.start,"MMMM"),n.value=p(i.value,l.value)}),(_,F)=>(d(),m("div",Ce,[s("div",ke,[je,s("div",Me,[s("div",Fe,w(f.value),1),s("div",Be,[s("div",{class:"no-scrollbar flex h-full items-center justify-center overflow-x-auto overflow-y-clip sm:h-1/2",ref_key:"wrapper",ref:v},[s("div",{class:"container relative h-full w-full",style:B(k.value)},[(d(!0),m(T,null,j(n.value,($,S)=>(d(),m("div",{key:S,class:z(["slide absolute bottom-0 top-0 my-auto flex cursor-pointer items-center justify-center text-primary-600",{"scale-150 font-bold":S===h.value}]),id:`slide${S}`,style:B(`left:${r.value*S}px; width:${r.value}px`),onClick:ze=>W($.date,S)},[s("div",null,w($.date),1),s("div",{class:z(["day ms-2",{hidden:S!==h.value}])},w($.day),3)],14,Ie))),128))],4)],512),Oe]),Re])])]))}},Ne={class:"flex h-screen flex-col items-center justify-center bg-stone-900 py-16 uppercase text-primary-600 sm:pb-0"},Je={__name:"EventCalendar",setup(t){const{getScreeningsByDate:e}=H(),a=x({}),c=I();return R(async()=>{a.value=await e(c.params.date),E(()=>se())}),O(()=>c.params.date,async()=>{a.value=await e(c.params.date),E(()=>ne())}),(v,u)=>{const r=De,o=ye;return d(),m("div",Ne,[b(r),b(o,{screenTimes:a.value},null,8,["screenTimes"])])}}};export{Je as default};
